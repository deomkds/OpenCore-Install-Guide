(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{563:function(e,a,t){e.exports=t.p+"assets/img/replace.6929333c.png"},564:function(e,a,t){e.exports=t.p+"assets/img/debug.4f3d7c16.png"},676:function(e,a,t){"use strict";t.r(a);var o=t(28),v=Object(o.a)({},(function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"depurando-o-opencore"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#depurando-o-opencore"}},[e._v("#")]),e._v(" Depurando o OpenCore")]),e._v(" "),o("p",[e._v("Precisando descobrir o motivo de problemas ou travamentos? Bem, você veio ao lugar certo:")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"#file-swaps"}},[e._v("Troca de Arquivos")])]),e._v(" "),o("li",[o("a",{attrs:{href:"#config-changes"}},[e._v("Mudanças de Configurações")])]),e._v(" "),o("li",[o("a",{attrs:{href:"#disabling-all-logging"}},[e._v("Desativando Todos os Logs")])])]),e._v(" "),o("h2",{attrs:{id:"troca-de-arquivos"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#troca-de-arquivos"}},[e._v("#")]),e._v(" Troca de Arquivos")]),e._v(" "),o("p",[e._v("Antes de começar, certifique-se de estar usando a versão de depuração "),o("code",[e._v("DEBUG")]),e._v("ou a versão "),o("code",[e._v("NOOPT")]),e._v(" do OpenCore. Elas fornecerão muito mais informações do que a versão de lançamento "),o("code",[e._v("RELEASE")]),e._v(". É preciso trocar os seguintes arquivos:")]),e._v(" "),o("ul",[o("li",[e._v("EFI/BOOT/\n"),o("ul",[o("li",[o("code",[e._v("BOOTx64.efi")])])])]),e._v(" "),o("li",[e._v("EFI/OC/Drivers/\n"),o("ul",[o("li",[o("code",[e._v("OpenRuntime.efi")])]),e._v(" "),o("li",[o("code",[e._v("OpenCanopy.efi")]),e._v("(caso o esteja usando)")])])]),e._v(" "),o("li",[e._v("EFI/OC/\n"),o("ul",[o("li",[o("code",[e._v("OpenCore.efi")])])])])]),e._v(" "),o("p",[o("img",{attrs:{src:t(563),alt:""}})]),e._v(" "),o("ul",[o("li",[o("strong",[e._v("Observação")]),e._v(": geralmente, é melhor depurar os sistemas sem o OpenCanopy. Caso seja necessário, certifique-se de estar usando a versão de depuração ("),o("code",[e._v("DEBUG")]),e._v(") do OpenCanopy ou não haverá praticamente nenhuma informação de depuração.")])]),e._v(" "),o("h2",{attrs:{id:"mudancas-de-configuracoes"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#mudancas-de-configuracoes"}},[e._v("#")]),e._v(" Mudanças de Configurações")]),e._v(" "),o("p",[e._v("Então, acesse a sua "),o("code",[e._v("config.plist")]),e._v(" e localize a seção "),o("code",[e._v("Misc")]),e._v(". Será necessário alterar algumas entradas aqui:")]),e._v(" "),o("h3",{attrs:{id:"misc"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#misc"}},[e._v("#")]),e._v(" Misc")]),e._v(" "),o("p",[e._v("Aqui, será necessário ativar as seguintes opções:")]),e._v(" "),o("ul",[o("li",[o("p",[o("strong",[e._v("AppleDebug")]),e._v(": YES")]),e._v(" "),o("ul",[o("li",[e._v("Fornece muito mais informações de depuração, especificamente as relacionadas ao "),o("code",[e._v("boot.efi")]),e._v(" e também faz com que o log seja salvo no disco.")])])]),e._v(" "),o("li",[o("p",[o("strong",[e._v("ApplePanic")]),e._v(": YES")]),e._v(" "),o("ul",[o("li",[e._v("Isso permitirá que "),o("code",[e._v("kernel panics")]),e._v(" sejam salvas no disco. Altamente recomendado manter o argumento de inicialização "),o("code",[e._v("keepsyms=1")]),e._v(" na entrada "),o("code",[e._v("boot-args")]),e._v(" para preservar a maior quantidade possível de informações.")])])]),e._v(" "),o("li",[o("p",[o("strong",[e._v("DisableWatchdog")]),e._v(": YES")]),e._v(" "),o("ul",[o("li",[e._v("Desabilita o "),o("em",[e._v("watchdog")]),e._v(" UEFI, usado para quando o OpenCore trava ou coisas não críticas.")])])]),e._v(" "),o("li",[o("p",[o("strong",[e._v("Target")]),e._v(": "),o("code",[e._v("67")]),e._v("(ou calcule um abaixo)")]),e._v(" "),o("ul",[o("li",[e._v("Usado para habilitar diferentes níveis de depuração.")])])])]),e._v(" "),o("table",[o("thead",[o("tr",[o("th",{staticStyle:{"text-align":"left"}},[e._v("Valor")]),e._v(" "),o("th",{staticStyle:{"text-align":"left"}},[e._v("Observação")])])]),e._v(" "),o("tbody",[o("tr",[o("td",{staticStyle:{"text-align":"left"}},[o("code",[e._v("0x01")])]),e._v(" "),o("td",{staticStyle:{"text-align":"left"}},[e._v("Habilita os logs.")])]),e._v(" "),o("tr",[o("td",{staticStyle:{"text-align":"left"}},[o("code",[e._v("0x02")])]),e._v(" "),o("td",{staticStyle:{"text-align":"left"}},[e._v("Habilita a depuração na tela.")])]),e._v(" "),o("tr",[o("td",{staticStyle:{"text-align":"left"}},[o("code",[e._v("0x04")])]),e._v(" "),o("td",{staticStyle:{"text-align":"left"}},[e._v("Habilita o salvamento de logs no Data Hub.")])]),e._v(" "),o("tr",[o("td",{staticStyle:{"text-align":"left"}},[o("code",[e._v("0x08")])]),e._v(" "),o("td",{staticStyle:{"text-align":"left"}},[e._v("Habilita a saída de logs na porta serial.")])]),e._v(" "),o("tr",[o("td",{staticStyle:{"text-align":"left"}},[o("code",[e._v("0x10")])]),e._v(" "),o("td",{staticStyle:{"text-align":"left"}},[e._v("Habilita os logs de variávies UEFI.")])]),e._v(" "),o("tr",[o("td",{staticStyle:{"text-align":"left"}},[o("code",[e._v("0x20")])]),e._v(" "),o("td",{staticStyle:{"text-align":"left"}},[e._v("Habilita os logs de variávies UEFI não voláteis.")])]),e._v(" "),o("tr",[o("td",{staticStyle:{"text-align":"left"}},[o("code",[e._v("0x40")])]),e._v(" "),o("td",{staticStyle:{"text-align":"left"}},[e._v("Habilita o salvamento de logs em arquivos.")])])])]),e._v(" "),o("p",[e._v("Para calcular o valor de "),o("code",[e._v("Target")]),e._v(", use uma calculadora hexadecimal e então converta o valor para decimal. Então, armazene os valores em um arquivo "),o("code",[e._v(".txt")]),e._v(" para consulta posterior.")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("0x01")]),e._v(" — Habilita os logs.")]),e._v(" "),o("li",[o("code",[e._v("0x02")]),e._v(" — Habilita a depuração na tela.\n"),o("ul",[o("li",[e._v("Observe que isso pode aumentar bastante o tempo de inicialização em firmwares com implementações de GOP (driver de vídeo EFI) ruins.")])])]),e._v(" "),o("li",[o("code",[e._v("0x10")]),e._v(" — Habilita os logs de variávies UEFI.")]),e._v(" "),o("li",[o("code",[e._v("0x40")]),e._v(" — Habilita o salvamento de logs em arquivos.")])]),e._v(" "),o("p",[o("code",[e._v("0x01")]),e._v(" + "),o("code",[e._v("0x02")]),e._v(" + "),o("code",[e._v("0x10")]),e._v(" + "),o("code",[e._v("0x40")]),e._v(" = "),o("code",[e._v("0x53")])]),e._v(" "),o("p",[o("code",[e._v("0x53")]),e._v(" convertido para decimal é "),o("code",[e._v("83")])]),e._v(" "),o("p",[e._v("Então, configure "),o("code",[e._v("Misc")]),e._v(" -> "),o("code",[e._v("Debug")]),e._v(" -> "),o("code",[e._v("Target")]),e._v(" -> "),o("code",[e._v("83")])]),e._v(" "),o("ul",[o("li",[o("strong",[e._v("DisplayLevel")]),e._v(": "),o("code",[e._v("2147483714")]),e._v("(ou calcule um valor abaixo)\n"),o("ul",[o("li",[e._v("Usado para configurar o que aparecerá no log.")])])])]),e._v(" "),o("table",[o("thead",[o("tr",[o("th",{staticStyle:{"text-align":"left"}},[e._v("Valor")]),e._v(" "),o("th",{staticStyle:{"text-align":"left"}},[e._v("Observação")])])]),e._v(" "),o("tbody",[o("tr",[o("td",{staticStyle:{"text-align":"left"}},[o("code",[e._v("0x00000002")])]),e._v(" "),o("td",{staticStyle:{"text-align":"left"}},[e._v("DEBUG_WARN nas versões "),o("code",[e._v("DEBUG")]),e._v(", "),o("code",[e._v("NOOPT")]),e._v(", "),o("code",[e._v("RELEASE")]),e._v(".")])]),e._v(" "),o("tr",[o("td",{staticStyle:{"text-align":"left"}},[o("code",[e._v("0x00000040")])]),e._v(" "),o("td",{staticStyle:{"text-align":"left"}},[e._v("DEBUG_INFO nas versões "),o("code",[e._v("DEBUG")]),e._v(", "),o("code",[e._v("NOOPT")]),e._v(".")])]),e._v(" "),o("tr",[o("td",{staticStyle:{"text-align":"left"}},[o("code",[e._v("0x00400000")])]),e._v(" "),o("td",{staticStyle:{"text-align":"left"}},[e._v("DEBUG_VERBOSE em "),o("em",[e._v("builds")]),e._v(" personalizadas.")])]),e._v(" "),o("tr",[o("td",{staticStyle:{"text-align":"left"}},[o("code",[e._v("0x80000000")])]),e._v(" "),o("td",{staticStyle:{"text-align":"left"}},[e._v("DEBUG_ERROR nas versões "),o("code",[e._v("DEBUG")]),e._v(", "),o("code",[e._v("NOOPT")]),e._v(", "),o("code",[e._v("RELEASE")]),e._v(".")])])])]),e._v(" "),o("p",[e._v("Uma lista completa pode ser encontrada no arquivo "),o("a",{attrs:{href:"https://github.com/tianocore/edk2/blob/UDK2018/MdePkg/Include/Library/DebugLib.h",target:"_blank",rel:"noopener noreferrer"}},[e._v("DebugLib.h"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("p",[e._v("Neste caso, use só os valores a seguir:")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("0x00000002")]),e._v(" — DEBUG_WARN nas versões "),o("code",[e._v("DEBUG")]),e._v(", "),o("code",[e._v("NOOPT")]),e._v(", "),o("code",[e._v("RELEASE")]),e._v(".")]),e._v(" "),o("li",[o("code",[e._v("0x00000040")]),e._v(" — DEBUG_INFO nas versões "),o("code",[e._v("DEBUG")]),e._v(", "),o("code",[e._v("NOOPT")]),e._v(".")]),e._v(" "),o("li",[o("code",[e._v("0x80000000")]),e._v(" — DEBUG_ERROR nas versões "),o("code",[e._v("DEBUG")]),e._v(", "),o("code",[e._v("NOOPT")]),e._v(", "),o("code",[e._v("RELEASE")]),e._v(".")])]),e._v(" "),o("p",[e._v("Assim como com "),o("code",[e._v("Target")]),e._v(", será preciso calcular o valor em hexadecimal e convertê-lo para decimal:")]),e._v(" "),o("p",[o("code",[e._v("0x80000042")]),e._v(" convertido para decimal fica "),o("code",[e._v("Misc -> Debug -> DisplayLevel -> 2147483714")])]),e._v(" "),o("p",[e._v("Uma vez terminado, seu arquivo "),o("code",[e._v("config.plist")]),e._v(" deve ficar parecido com isso:")]),e._v(" "),o("p",[o("img",{attrs:{src:t(564),alt:""}})]),e._v(" "),o("h2",{attrs:{id:"desativando-todos-os-logs"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#desativando-todos-os-logs"}},[e._v("#")]),e._v(" Desativando Todos os Logs")]),e._v(" "),o("p",[e._v("Para remover todos os logs e mensagens de depuração, simplesmente troque todos os arquivos do OpenCore por aqueles encontrados na versão de lançamento "),o("code",[e._v("RELEASE")]),e._v(", da mesma forma como foi feito na seção "),o("a",{attrs:{href:"#file-swap"}},[e._v("Troca de Arquivos")]),e._v(".")]),e._v(" "),o("p",[e._v("Por fim, para deixar de salvar no disco, configure as seguintes opções:")]),e._v(" "),o("ul",[o("li",[e._v("AppleDebug = "),o("code",[e._v("NO")])]),e._v(" "),o("li",[e._v("ApplePanic = "),o("code",[e._v("NO")])]),e._v(" "),o("li",[e._v("Target = "),o("code",[e._v("0")])])])])}),[],!1,null,null,null);a.default=v.exports}}]);